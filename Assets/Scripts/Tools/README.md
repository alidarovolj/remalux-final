# Инструменты для анализа ONNX-моделей

В этой директории находятся Python-скрипты для анализа и отладки ONNX-моделей, используемых в проекте AR Wall Painting.

## Подготовка среды

Прежде чем использовать скрипты, необходимо установить нужные Python-пакеты:

```bash
pip install onnx numpy onnxruntime
```

## Описание скриптов

### 1. inspect_onnx.py

Использует пакет `onnx` для вывода подробной информации о структуре графа модели:
- Версия IR и метаданные
- Входные и выходные тензоры (имена, формы, типы данных)
- Параметры (initializers)
- Узлы графа и их связи

**Использование:**
```bash
python inspect_onnx.py path/to/model.onnx
```

### 2. inspect_onnx_rt.py

Использует `onnxruntime` для проверки возможностей рантайма:
- Загружает модель
- Выводит информацию о входах/выходах
- Выполняет «нулевой» прогон с фиктивными данными

Этот скрипт особенно полезен для проверки совместимости модели с рантаймом и выявления проблем заранее.

**Использование:**
```bash
python inspect_onnx_rt.py path/to/model.onnx
```

## Применение в Unity с Barracuda

Результаты анализа этих скриптов помогают настроить правильное использование модели в Unity:

1. Проверить соответствие имён и форматов входных/выходных тензоров
2. Убедиться в правильной обработке форматов данных (NCHW/NHWC)
3. Определить правильное количество каналов и размеры входных данных
4. Выявить несовместимые операции до интеграции с Barracuda

## Примеры использования

Для модели сегментации стен:

```bash
# Анализ структуры модели BiseNet.onnx
python inspect_onnx.py Assets/Models/BiseNet.onnx

# Проверка совместимости с рантаймом и тестовый прогон
python inspect_onnx_rt.py Assets/Models/BiseNet.onnx
``` 